#### Содержание
* [Параметры файла конфигурации, отвечающие за локализацию](#параметры-файла-конфигурации-отвечающие-за-локализацию)
* [Логика применения локализаци](#логика-применения-локализаци)
* [Структура раздела `locales` файла конфигурации settings.json](#структура-раздела-locales-файла-конфигурации-settingsjson)
* [Описание ключей локализации](#описание-ключей-локализации)
* [Пример переопределения некоторых локалей](#пример-переопределения-некоторых-локалей)
* [Структура и значения по умолчанию](#структура-и-значения-по-умолчанию)

## Языковая локализация виджета

Поддерживается настройка надписей для соответствия виджета локализации ваших сайтов.
В поставку включены локализации для всех надписей виджета на языках: русский (`ru`), английский (`en`), индонезийский (`id`), азербайджанский (`az`). Они включены в код виджета.
Вы можете добавить любое количество дополнительных локалей или переопределить настройки существующих.
Управление локализациями выполняется в файле настроек `settings.json`.
Для конфигурирования укажите в ветке `locales` файла `settings.json` ключ надписи, код языка и значение для этого языка.

### Параметры файла конфигурации, отвечающие за локализацию

Управление языковыми локализациями осуществляется в файле настроек `settings.json`.

|Параметр|Значения|По умолчанию|Описание|
|---|---|---|---|
|locale|строка|"en"|Предпочтительная локаль - языковой код в формате ISO 639-1|
|locales|JSON-объект|{}|Объект, с ключами для переопределения локализаций. Указываются только те ключи и языковые коды, значения которых требуется переопределить|

### Логика применения локализаци

При настройке локализации в `settings.json` вы можете указать предпочтительную локаль.
Для смены локали виджета на лету используется метод [`setLocale`](методы-и-свойства-api#`SDK-API-ThreadsWidget.setLocale(locale)`)

Для отображения виджета локаль определяется по логике:
1. Текущая локаль: заданная при инициализации виджета или заданная методом смены локали ссылка. Если текущая не задана, то:
2. Предпочтительная: выбранная в `settings.json`. Если предпочтительная не задана, то:
3. Дефолтная: локаль `en`

Приоритет отображения надписей:
1. Переопределенные в файле `setting.json`. Если не заданы, то:
2. [Дефолтные](#структура-и-значения-по-умолчанию)

### Структура раздела `locales` файла конфигурации settings.json

```json
{
    "раздел": {
        "подраздел": {
            "элемент1": {
                "язык1": "значение для языка 1",
                "язык2": "значение для языка 2"
            }
        }
    }
}
```

### Описание ключей локализации

Конечным значением ключа является обьект содержащий в свойствах пары `код языка`: `значения для языка` (см. [структуру](#структура-и-значения-по-умолчанию))

|Ключ|Описание|
|----|--------|
|`common.time.now`|Плавающая метка даты - сейчас
|`common.time.today`|Плавающая метка даты - сегодня
|`common.time.yesterday`|Плавающая метка даты - вчера
|`common.text.chars.error`|Ошибка превышения символов в поле ввода
|`common.typing`|Идентификатор набора текста оператором 
|`plurals.PLURAL_SYMBOL`|Окончания для индикатора оставшихся для ввода символов
|`LimitedTextarea.chars`|Поле ввода формы обратной связи, индикатор оставшихся для ввода символов "N символ(ов)"
|`ChatHeader.empty`|Заголовок чата - пустой
|`ChatHeader.title`|Заголовок чата - титульная строка
|`ChatHeader.search`|Заголовок чата - поиск оператора
|`ChatHeader.operatorSubTitle`|Заголовок чата - название оператора
|`ChatHeader.inactive`|Заголовок чата - чат неактивен
|`ChatWelcome.remained`|Форма приветствия - уведомление если есть ограничение по количеству символов для ввода
|`ChatWelcome.sendWelcome`|Форма приветствия - кнопка отправки формы
|`ChatWelcome.identification.pre.text`|Форма приветствия - приветсвенное слово
|`ChatWelcome.identification.pre.notice`|Форма приветствия - приглашение представиться
|`ChatWelcome.identification.post.text`|Форма приветствия - текст после представления
|`ChatWelcome.identification.post.notice`|Форма приветствия - уведомление после представления
|`ChatWelcome.form.phone.placeholder`|Форма приветствия - подсказка для ввода телефона, если маска не задана
|`ChatWelcome.form.phone.error`|Форма приветствия - ошибка правильности заполнения телефона
|`ChatWelcome.form.phone.required`|Форма приветствия - поле телефон не заполнено
|`ChatWelcome.form.email.placeholder`|Подсказка для ввода электронной почты
|`ChatWelcome.form.email.error`|Ошибка правильности заполнения электронной почты
|`ChatWelcome.form.email.required`|Поле электронная почта не заполнено
|`ChatWelcome.form.name.placeholder`|Подсказка для ввода имени
|`ChatWelcome.form.name.required`|Поле имя не заполнено
|`ChatWelcome.inactivityForm.sent`|Форма обратной связи - уведомление после отправки сообщения
|`ChatWelcome.inactivityForm.sendMessage`|Форма обратной связи - кнопка отправки
|`ChatPoll.post.text`|Текст после оценки
|`ChatEndPoll.text`|Вопрос о необходимости продолжить консультацию после ответа специалиста
|`ChatEndPoll.yes`|Положительный ответ (продолжить)
|`ChatEndPoll.no`|Отрицательныый ответ (не продолжать)
|`ChatInput.errorSize`|Поле ввода сообщения - превышение допустимого размера прикрепляемого файла
|`ChatInput.errorFormat`|Ошибка недопустимого формата прикрепляемого файла
|`ChatInput.placeholder`|Подсказка для ввода сообщения (плейсхолдер)
|`ChatInput.attachments.default`|Вложения - подпись
|`ChatInput.attachments.uploading`|Процесс загрузки вложения
|`ChatInput.attachments.uploaded`|Вложение загружено и готово к отправке
|`ChatInput.attachments.error`|Ошибка загрузки вложения
|`ChatMessage.of`|Сообщение опрос А "из" Б
|`ChatMessage.yourself`|Местоимение "Вы" в заголовке сообщения
|`ChatMessage.youWrote`|Метка "вы написали"
|`ChatMessage.operatorWrote`|Метка "оператор написал"
|`Offline.reconnect`|Чат отключен - кнопка переподключиться
|`Offline.up.text`|Соединение восстановлено
|`Offline.down.text`|Сообщение о потеряни связи с сервером
|`Offline.down.notice`|Уведомление о проверке подключения к сети интернет
|`WebNotifications.new`|Веб-уведомление о новом сообщении
|`WebNotifications.attachments`|Веб-уведомление о вложении
|`SocialLinks.text`|Социальные сети
|`webview.loadError`|Ошибка загрузки данных для webview
|`Emoji.recent`|Эмоджи - вкладка "Недавние"
|`Emoji.people`|Эмоджи - вкладка "Смайлики и люди"
|`Emoji.nature`|Эмоджи - вкладка "Животные и природа"
|`Emoji.foods`|Эмоджи - вкладка "Еда и напитки"
|`Emoji.activity`|Эмоджи - вкладка "Активности"
|`Emoji.places`|Эмоджи - вкладка "Путешествия и места"
|`Emoji.objects`|Эмоджи - вкладка "Предметы"
|`Emoji.symbols`|Эмоджи - вкладка "Символы"

### Пример переопределения некоторых локалей

`settings.json`:

```json
{
    "locale": "ru",

    ... // прочие настройки

    "locales": {
        "ChatWelcome": {
            "remained": {
                "ru": "Осталось"
            },
            "identification": {
                "pre": {
                    "notice": {
                        "ru": "Представьтесь, пожалуйста, и начнём.",
                        "en": "Please, tell us something about yourself."
                    }
                }
            }
        },
        "ChatInput": {
            "placeholder": {
                "en": "Type your message here..."
            }
        }
    }
}
```

### Структура и значения по умолчанию

```json
{
    "common": {
        "time": {
            "now": {
                "ru": "менее минуты",
                "en": "now",
                "az": "now",
                "id": "sekarang"
            },
            "today": {
                "ru": "сегодня",
                "en": "today",
                "az": "today",
                "id": "hari ini"
            },
            "yesterday": {
                "ru": "вчера",
                "en": "yesterday",
                "az": "yesterday",
                "id": "kemarin"
            }
        },
        "text": {
            "chars": {
                "error": {
                    "ru": "Превышено число символов",
                    "en": "Characters limit reached",
                    "az": "İşarələrin həddi sona çatdı",
                    "id": "Batas simbol tercapai"
                }
            }
        },
        "typing": {
            "ru": "печатает...",
            "en": "typing...",
            "az": "typing...",
            "id": "typing..."
        }
    },
    "plurals": {
        "PLURAL_SYMBOL": {
            "ru": [
                "символ",
                "символа",
                "символов"
            ],
            "en": [
                "symbol",
                "symbols",
                "symbols"
            ],
            "az": [
                "işarə",
                "işarələr",
                "işarələr"
            ],
            "id": [
                "symbol",
                "symbol",
                "symbol"
            ]
        }
    },
    "LimitedTextarea": {
        "chars": {
            "ru": "осталось символов",
            "en": "characters left",
            "az": "qalan işarələr",
            "id": "simbol kiri"
        }
    },
    "ChatHeader": {
        "empty": {
            "ru": "Чат",
            "en": "Chat"
        },
        "title": {
            "ru": "Добро пожаловать в чат!",
            "en": "Welcome to chat"
        },
        "search": {
            "ru": "Поиск оператора",
            "en": "Looking for operator"
        },
        "operatorSubTitle": {
            "ru": "оператор",
            "en": "operator"
        },
        "inactive": {
            "ru": "Чат временно недоступен",
            "en": "Chat temporarily unavailable"
        }
    },
    "ChatWelcome": {
        "remained": {
            "ru": "Осталось",
            "en": "Remained",
            "az": "Qaldı",
            "id": "Tersisa"
        },
        "sendWelcome": {
            "ru": "Представиться",
            "en": "Start chat",
            "az": "Çata başlamaq",
            "id": "Start chat"
        },
        "identification": {
            "pre": {
                "text": {
                    "ru": "Появились вопросы к нам? Давайте обсудим здесь.",
                    "en": "Can we help you? Let's discuss it in chat.",
                    "az": "Sizə necə kömək edə bilərik?",
                    "id": "Bisakah kami membantu Anda? Mari kita bahas dalam obrolan."
                },
                "notice": {
                    "ru": "Представьтесь, пожалуйста, и начнём.",
                    "en": "Please, tell us something about yourself.",
                    "az": "Zəhmət olmasa, özünüz barədə məlumat verin.",
                    "id": "Tolong, beri tahu kami sesuatu tentang diri Anda."
                }
            },
            "post": {
                "text": {
                    "ru": "Спасибо за то, что представились.",
                    "en": "Thank you for sharing.",
                    "az": "Bölüşdüyünz üçün təşəkkür edirik.",
                    "id": "Terima kasih sudah berbagi."
                },
                "notice": {
                    "ru": "Это необходимо для идентификации.",
                    "en": "It will help us to support you later.",
                    "az": "Bu bizə sizə daha sonra xidmət göstərməyə kömək edəcək.",
                    "id": "Ini akan membantu kami untuk mendukung Anda nanti."
                }
            }
        },
        "form": {
            "phone": {
                "placeholder": {
                    "ru": "Номер телефона",
                    "en": "Phone number",
                    "az": "Phone number",
                    "id": "Phone number"
                },
                "error": {
                    "ru": "Телефон введен некорректно",
                    "en": "Invalid phone number",
                    "az": "Yanlış telefon nömrəsi",
                    "id": "Nomor telepon salah"
                },
                "required": {
                    "ru": "Укажите телефон",
                    "en": "Phone number is required",
                    "az": "Phone number is required",
                    "id": "Phone number is required"
                }
            },
            "email": {
                "placeholder": {
                    "ru": "Электронная почта",
                    "en": "Email",
                    "az": "Email",
                    "id": "Email"
                },
                "error": {
                    "ru": "Email введен некорректно",
                    "en": "Invalid email",
                    "az": "Yanlış email",
                    "id": "Email tidak valid"
                },
                "required": {
                    "ru": "Укажите Email",
                    "en": "Email is required",
                    "az": "Email is required",
                    "id": "Email is required"
                }
            },
            "name": {
                "placeholder": {
                    "ru": "Ваше имя",
                    "en": "Name",
                    "az": "Name",
                    "id": "Name"
                },
                "required": {
                    "ru": "Укажите имя",
                    "en": "Name is required",
                    "az": "Name is required",
                    "id": "Name is required"
                }
            }
        },
        "inactivityForm": {
            "sent": {
                "ru": "Ваше сообщение отправлено в&nbsp;контактный центр. С Вами свяжется оператор.",
                "en": "Your message was sent to the contact center. Wait for the reply."
            },
            "sendMessage": {
                "ru": "Отправить",
                "en": "Send",
                "az": "Göndərmək",
                "id": "Send"
            }
        }
    },
    "ChatPoll": {
        "post": {
            "text": {
                "ru": "Спасибо за вашу оценку",
                "en": "We appreciate your choice",
                "az": "Seçiminiz üçün təşəkkür edirik!",
                "id": "Kami menghargai pilihan Anda"
            }
        }
    },
    "ChatEndPoll": {
        "text": {
            "ru": "Вы получили ответы на все вопросы, завершить консультацию?",
            "en": "Do you have any other questions for us?",
            "az": "Əlavə sualınız olacaqmı?",
            "id": "Apakah Anda memiliki pertanyaan lain untuk kami?"
        },
        "yes": {
            "ru": "Продолжить",
            "en": "Yes",
            "az": "Bəli",
            "id": "Ya"
        },
        "no": {
            "ru": "Завершить",
            "en": "No",
            "az": "Xeyr",
            "id": "Tidak"
        }
    },
    "ChatInput": {
        "errorSize": {
            "ru": "превышен максимальный размер",
            "en": "the uploaded file exceeds the",
            "az": "Yüklədiyiniz fayl ….. aşır",
            "id": "the uploaded file exceeds the"
        },
        "errorFormat": {
            "ru": "недопустимый формат файла",
            "en": "invalid file format",
            "az": "Yanlış fayl formatı",
            "id": "invalid file format"
        },
        "placeholder": {
            "ru": "Ваше сообщение...",
            "en": "Type your message here...",
            "az": "Mesajınızı burada yazın...",
            "id": "Masukan pesan anda disini..."
        },
        "attachments": {
            "default": {
                "ru": "Вложение",
                "en": "Attachment",
                "az": "Qoşma",
                "id": "Lampiran"
            },
            "uploading": {
                "ru": "Загрузка вложения...",
                "en": "Uploading...",
                "az": "Yüklənir...",
                "id": "Uploading..."
            },
            "uploaded": {
                "ru": "Готово. Отправить – Enter.",
                "en": "uploaded. Press Enter.",
                "az": "Yükləndi. Enter-i tıklayın.",
                "id": "uploaded. Press Enter."
            },
            "error": {
                "ru": "Не удалось загрузить вложение",
                "en": "Upload failed",
                "az": "Yükləmə baş tutmadı",
                "id": "Upload failed"
            }
        }
    },
    "ChatMessage": {
        "of": {
            "ru": "из",
            "en": "of",
            "az": "of",
            "id": "of"
        },
        "yourself": {
            "ru": "Вы",
            "en": "You"
        },
        "youWrote": {
            "ru": "Вы написали",
            "en": "You wrote"
        },
        "operatorWrote": {
            "ru": "Оператор ${ name } написал",
            "en": "Operator ${ name } wrote"
        }
    },
    "Offline": {
        "reconnect": {
            "ru": "Подключиться снова",
            "en": "Reconnect",
            "az": "Təkrar bağlan",
            "id": "Reconnect"
        },
        "up": {
            "text": {
                "ru": "Соединение восстановлено",
                "en": "Connection is active",
                "az": "Bağlantı aktivdir",
                "id": "Connection is active"
            }
        },
        "down": {
            "text": {
                "ru": "Потеряна связь с сервером",
                "en": "Connection is dropped",
                "az": "Bağlantı kəsildi",
                "id": "Connection is dropped"
            },
            "notice": {
                "ru": "проверьте ваше подключение к сети интернет",
                "en": "check your internet connection",
                "az": "İnternetlə bağlantınızı yoxlayın",
                "id": "check your internet connection"
            }
        }
    },
    "WebNotifications": {
        "new": {
            "ru": "Новое сообщение: ",
            "en": "New message: ",
            "az": "Yeni mesaj: ",
            "id": "New message: "
        },
        "attachments": {
            "ru": "Вложение",
            "en": "Attachment",
            "az": "Qoşma",
            "id": "Attachment"
        }
    },
    "SocialLinks": {
        "text": {
            "ru": "Спросить в мессенджере",
            "en": "Ask in the messenger",
            "id": "Bertanya the messenger"
        }
    },
    "webview": {
        "loadError": {
            "ru": "Ошибка загрузки данных",
            "en": "Error loading data from server",
            "id": "Error loading data from server"
        }
    },
    "Emoji": {
        "recent": {
            "ru": "Недавние",
            "en": "Frequently Used",
            "id": "Sering digunakan",
            "az": "Son istifadə olunmuş"
        },
        "people": {
            "ru": "Смайлики и люди",
            "en": "Smileys & People",
            "id": "Smiley & Orang",
            "az": "Smayllar və insanlar"
        },
        "nature": {
            "ru": "Животные и природа",
            "en": "Animals & Nature",
            "id": "Hewan & Alam",
            "az": "Heyvanlar və təbiət"
        },
        "foods": {
            "ru": "Еда и напитки",
            "en": "Food & Drink",
            "id": "Makanan Minuman",
            "az": "Qida və içkilər"
        },
        "activity": {
            "ru": "Активности",
            "en": "Activity",
            "id": "Aktivitas",
            "az": "Fəallıq"
        },
        "places": {
            "ru": "Путешествия и места",
            "en": "Travel & Places",
            "id": "Travel & Places",
            "az": "Səyahət və yerlər"
        },
        "objects": {
            "ru": "Предметы",
            "en": "Objects",
            "id": "Benda",
            "az": "Əşyalar"
        },
        "symbols": {
            "ru": "Символы",
            "en": "Symbols",
            "id": "Simbol",
            "az": "Simvollar"
        }
    }
}
```